## 练习 47：生成和过滤值

嵌套的`for`循环有时很方便，因为它们非常紧凑，可以使一些变量通过许多不同的值组合进行更改。

多年前，一名学生向我提出了以下数学问题：

“布朗农场主想要花费 100.00 美元，并且想要购买确切的 100 只动物。如果每只羊的成本为 10 美元，每只山羊的成本为 3.50 美元，每只鸡的成本为 0.50 美元，那么他应该购买多少只动物？”

他离开后，我想了几秒钟，然后写了以下程序。

```java
 1 public class FarmerBrown
 2 {
 3     public static void main( String[] args )
 4     {
 5         for ( int s = 1 ; s <= 100 ; s++ )
 6         {
 7             for ( int g = 1 ; g <= 100 ; g++ )
 8             {
 9                 for ( int c = 1 ; c <= 100 ; c++ )
10                 {
11                     if ( s+g+c == 100 && 10.00*s + 3.50*g + 0.50*c == 100.00 )
12                     {
13                         System.out.print( s + " sheep, " );
14                         System.out.print( g + " goats, and " );
15                         System.out.println( c + " chickens." );
16                     }
17                 }
18             }
19         }
20     }
21 }

```

### 你应该看到什么

```java

4 sheep, 4 goats, and 92 chickens.
```

这个程序很整洁，因为它非常简短。但是，坐在最内部循环内（在第 11 行的`if`语句前面）的观察者将看到一百万种不同的 s、g 和 c 组合。尝试的第一个组合将是 1 只羊，1 只山羊，1 只鸡。这将被插入到`if`语句中的数学方程式中。它们不会是真的，也不会打印任何东西。

然后下一个组合将是 1 只羊，1 只山羊和 2 只鸡。这也会失败。然后是 1 只羊，1 只山羊，3 只鸡。等等，直到 1 只羊，1 只山羊和 100 只鸡，当内部循环运行最后一次迭代时。

然后，第 7 行的`g ++`将执行，第 7 行的条件将检查 g 是否仍然小于或等于 100（是的），并且中间`for`循环的主体将再次执行。

这将导致最内层循环的初始化表达式再次运行，将 c 重置为 1。因此，在`if`语句中将测试的下一个变量组合是 1 只羊，2 只山羊和 1 只鸡。然后是 1 只羊，2 只山羊，2 只鸡，然后是 1 只羊，2 只山羊，3 只鸡。依此类推。

到最后，所有 100 * 100 * 100 种组合都经过了测试，其中 999,999 种失败了。但是因为计算机非常快，答案立即出现。

由于在`if`的主体中只有一行代码时，Java 中的大括号是可选的

```java
 1 public class FarmerBrownCompact
 2 {
 3     public static void main( String[] args )
 4     {
 5         for ( int s = 1 ; s <= 100 ; s++ )
 6             for ( int g = 1 ; g <= 100 ; g++ )
 7                 for ( int c = 1 ; c <= 100 ; c++ )
 8                     if ( s+g+c == 100 && 10.00*s + 3.50*g + 0.50*c == 100.00 )
 9                         System.out.println( s + " sheep, " + g + " goats, and " + c + "
chickens." );
10     }
11 }
```


在`if`的主体或`for`循环的主体中，我可以使代码更加紧凑：

这是完全合法的，并且与以前的版本行为完全相同。将其与我们使用`while`循环而不是`for`循环解决此程序时需要编写多少代码进行比较：

```java
 1 public class FarmerBrownWhile
 2 {
 3     public static void main( String[] args )
 4     {
 5         int s = 1;
 6         while ( s <= 100 )
 7         {
 8             int g = 1;
 9             while ( g <= 100 )
10             {
11                 int c = 1;
12                 while ( c <= 100 )
13                 {
14                     if ( s+g+c == 100 && 10.00*s + 3.50*g + 0.50*c == 100.00 )
15                     {
16                         System.out.print( s + " sheep, " );
17                         System.out.print( g + " goats, and " );
18                         System.out.println( c + " chickens." );
19                     }
20                     c++;
21                 }
22                 g++;
23             }
24             s++;
25         }
26     }
27 }

```


`while`循环版本也更加脆弱，因为很容易忘记将变量重置为`1`或在循环体的末尾递增它。使用`while`循环可能更容易编译，但更有可能出现细微的逻辑错误，编译后却不能按预期工作。

### 学习练习

1.我们的代码可以运行，但不够高效。（例如，没有理由让“sheep”循环尝试 11 只或 12 只或更多的羊，因为我们买不起。看看你是否可以改变循环边界，使组合更少浪费。

